# Сервис по анализу регионально-транспортной логистической системы

Веб-приложение для анализа регионально-транспортной логистической инфраструктуры. Позволяет получать объекты логистики из OpenStreetMap по заданной области, строить минимальное остовное дерево (MST) связей между ними и рассчитывать ключевые графовые метрики.

## Возможности

1. Загрузка данных логистической инфраструктуры (склады, терминалы, порты и др.) из OpenStreetMap в пределах заданного региона  
2. Построение полной графовой модели (геодезический граф) и выделение минимального остовного дерева для выбранного вида транспорта: автомобильного, авиационного, морского или железнодорожного  
3. Вычисление основных метрик графа: центральность степени узла, центральность близости, центральность посредничества, а также PageRank  
4. Генерация интерактивной карты с визуализацией логистической сети и результатами анализа (MST и выбранные метрики)

## Компоненты

1. **Frontend (React + Leaflet)** – одностраничное веб-приложение на базе Vite. Предоставляет интерактивную карту для выбора области анализа и отображает результаты (маршрут MST, метрики)  
2. **Backend (FastAPI)** – REST API сервис на Python. Обрабатывает запросы: загружает данные OSM, строит граф и MST, вычисляет метрики центральности. В ответ возвращает данные (JSON, HTML-карту) для отображения на фронтенде

## Требования

- **Python** 3.9+ (рекомендуется виртуальное окружение)  
- **Node.js** 18+ и **npm** (для запуска фронтенда)  
- **Python-библиотеки**: FastAPI, OSMnx, NetworkX, GeoPandas, Folium, etc. (см. `requirements.txt`)  
- **Node-библиотеки**: React, React-Leaflet, Leaflet (устанавливаются через npm)

## Установка

```bash
# (Опционально) Создать и активировать виртуальное окружение
python -m venv env
source env/bin/activate        # для Linux/MacOS
env\Scripts\activate           # для Windows

# Установить зависимости Python (бэкенд)
pip install -r logistic-backend-python/requirements.txt

# Установить зависимости Node.js (фронтенд)
cd logistic-frontend && npm install
```

## Запуск

```bash
# Linux/MacOS
./start.sh

# Windows
start.bat
```

*Примечание:* Скрипты выше запускают сервер FastAPI (порт 8000) и dev-сервер фронтенда Vite (порт 5173) параллельно. На Windows `start.bat` откроет два процесса. На Linux/MacOS при необходимости запустите бэкенд и фронтенд в отдельных терминалах вручную:

```bash
# Запуск бэкенда вручную (FastAPI на http://localhost:8000)
python logistic-backend-python/main.py

# Запуск фронтенда вручную (Dev-сервер на http://localhost:5173)
cd logistic-frontend && npm run dev
```

## Использование

После запуска приложения откройте в браузере интерфейс фронтенда (адрес по умолчанию выводится Vite, обычно `http://localhost:5173`). На странице выбора параметров:

- Выделите прямоугольную область анализа на карте (кликнув две точки, формируя границы) или введите координаты углов области вручную  
- Выберите режим транспорта: **Авто** (автомобильный), **Аэро** (авиационный), **Морской** (водный транспорт) или **Ж/Д** (железнодорожный)  
- Нажмите кнопку анализа – приложение отправит запрос к API (`POST /analyze`) для выбранного региона и типа транспорта  

После завершения анализа в браузере отобразится интерактивная карта с найденными объектами логистической инфраструктуры и минимальным остовным маршрутом (MST), соединяющим эти объекты. Также будет доступен выбор метрики графа для визуализации: при выборе метрики (степень, близость, посредничество или PageRank) фронтенд отправит запрос к API (`GET /metrics`) и отобразит на карте результаты расчёта (например, степень каждого узла цветом или размером). 

## Структура проекта

```markdown
.
├── logistic-frontend/        # Исходный код фронтенда (React + Vite)
│   ├── src/
│   │   ├── pages/            # Страницы приложения (AnalysisPage, ResultPage и др.)
│   │   ├── components/       # Компоненты интерфейса (карта выбора области и пр.)
│   │   └── ...               # Прочие файлы фронтенда (маршруты, стили, иконки)
│   ├── package.json          # Зависимости и скрипты фронтенда
│   └── ...                   # Конфиги (Vite, ESLint), статические файлы и пр.
│
├── logistic-backend-python/  # Исходный код бэкенда (FastAPI)
│   ├── main.py               # Запуск FastAPI-приложения, описание эндпоинтов
│   ├── models/               # Pydantic-модели (схемы данных API)
│   ├── services/             # Логика анализа: работа с OSM, построение графов, метрики
│   ├── requirements.txt      # Список Python-зависимостей бэкенда
│   └── ...                   # Дополнительные файлы (тесты, кэш и др.)
│
├── start.sh                  # Скрипт запуска приложения для Linux/MacOS
├── start.bat                 # Скрипт запуска приложения для Windows
└── README.md                 # Текущее описание проекта
```
